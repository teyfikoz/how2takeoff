Evet, bu mÃ¼mkÃ¼ndÃ¼r! KullanÄ±cÄ± kiÅŸisel verilerini toplamadan ama anonim olarak kullanÄ±cÄ±larÄ± analiz etmek ve dijital ID tanÄ±mlamak iÃ§in aÅŸaÄŸÄ±daki adÄ±mlarÄ± izleyebilirsin.

ğŸ“Œ 1. KullanÄ±cÄ± AnalitiÄŸi Ä°Ã§in Ä°zlenecek Yol

Hedef:
	â€¢	KullanÄ±cÄ±larÄ±n IP adreslerini ve cihaz bilgilerini toplayarak anonim bir dijital kimlik (digital ID) oluÅŸturmak.
	â€¢	KullanÄ±cÄ±larÄ±n hangi sekmede ne kadar sÃ¼re kaldÄ±klarÄ±nÄ± analiz etmek.
	â€¢	TÃ¼m bu verileri admin panelinde gÃ¶stermek (kullanÄ±cÄ±lara gÃ¶rÃ¼nmeyecek ÅŸekilde).

Ã‡Ã¶zÃ¼m:
Bu analizleri yapmak iÃ§in JavaScript (Frontend) ve Python/PHP (Backend) ile bir yapÄ± kurabiliriz.

ğŸ“Œ 2. KullanÄ±cÄ± Dijital KimliÄŸi (Digital ID) NasÄ±l OluÅŸturulur?

Dijital kimliÄŸi anonim olarak oluÅŸturmak iÃ§in aÅŸaÄŸÄ±daki yÃ¶ntemleri birleÅŸtirebiliriz:

1ï¸âƒ£ IP Adresi â†’ KullanÄ±cÄ±nÄ±n baÄŸlantÄ± noktasÄ±nÄ± belirler (Ã¼lke, ÅŸehir bilgisi almak iÃ§in).
2ï¸âƒ£ Cihaz TÃ¼rÃ¼ & TarayÄ±cÄ± Bilgisi â†’ KullanÄ±cÄ±nÄ±n cihazÄ±nÄ± belirler (mobil, tablet, PC, vs.).
3ï¸âƒ£ Zaman DamgasÄ± (Timestamp) â†’ KullanÄ±cÄ± ilk giriÅŸ yaptÄ±ÄŸÄ±nda bir zaman damgasÄ± alÄ±r.
4ï¸âƒ£ Hashleme (SHA-256 ile AnonimleÅŸtirme) â†’ IP + Cihaz Bilgisi + Tarih bilgilerini hashleyerek benzersiz bir Digital ID oluÅŸturulur.

ğŸ“Œ Digital ID Hashing Ã–rneÄŸi (Python)

import hashlib

def generate_digital_id(ip, user_agent):
    data = f"{ip}-{user_agent}"
    digital_id = hashlib.sha256(data.encode()).hexdigest()
    return digital_id

ğŸ“Œ Bu yÃ¶ntem sayesinde kiÅŸisel verileri (IP) saklamadan benzersiz bir kullanÄ±cÄ± IDâ€™si oluÅŸturabilirsin.

ğŸ“Œ 3. KullanÄ±cÄ±nÄ±n IP, Ãœlke ve Cihaz Bilgilerini Almak

Bunu JavaScript (Frontend) ve Flask/PHP (Backend) ile yapabiliriz.

ğŸŸ¢ A. KullanÄ±cÄ±nÄ±n IP Adresi & Ãœlke Bilgisi (JavaScript + API ile)

IP adresinden Ã¼lke ve ÅŸehir bilgisi almak iÃ§in ipinfo.io veya ip-api.com gibi servisleri kullanabilirsin.

ğŸ“Œ JavaScript Kodu (KullanÄ±cÄ±nÄ±n IP & Ãœlke Bilgisini AlÄ±r)

fetch('https://ipapi.co/json/')
  .then(response => response.json())
  .then(data => {
      const ip = data.ip;
      const country = data.country_name;
      const city = data.city;
      const userAgent = navigator.userAgent; // Cihaz ve TarayÄ±cÄ± Bilgisi

      // Backend'e gÃ¶nder
      fetch('/track-user', {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json'
          },
          body: JSON.stringify({ ip, country, city, userAgent })
      });
  });

ğŸ“Œ Bu kod, kullanÄ±cÄ±nÄ±n IP adresini ve cihaz bilgilerini backendâ€™e JSON formatÄ±nda gÃ¶nderir.

ğŸŸ¢ B. Backend (Python Flask) ile KullanÄ±cÄ±yÄ± Takip Etme

Åimdi, IP + TarayÄ±cÄ± bilgilerini alÄ±p Digital ID oluÅŸturacaÄŸÄ±z ve admin paneline kaydedeceÄŸiz.

ğŸ“Œ Python Flask Backend Kodu

from flask import Flask, request, jsonify
import hashlib
import sqlite3

app = Flask(__name__)

def generate_digital_id(ip, user_agent):
    data = f"{ip}-{user_agent}"
    digital_id = hashlib.sha256(data.encode()).hexdigest()
    return digital_id

@app.route('/track-user', methods=['POST'])
def track_user():
    data = request.json
    ip = data.get('ip')
    country = data.get('country')
    city = data.get('city')
    user_agent = data.get('userAgent')

    digital_id = generate_digital_id(ip, user_agent)

    # VeritabanÄ±na kaydet
    conn = sqlite3.connect('analytics.db')
    cursor = conn.cursor()
    cursor.execute("CREATE TABLE IF NOT EXISTS users (digital_id TEXT, ip TEXT, country TEXT, city TEXT, user_agent TEXT, visit_count INTEGER)")
    
    # KullanÄ±cÄ± zaten var mÄ± kontrol et
    cursor.execute("SELECT * FROM users WHERE digital_id = ?", (digital_id,))
    existing_user = cursor.fetchone()

    if existing_user:
        cursor.execute("UPDATE users SET visit_count = visit_count + 1 WHERE digital_id = ?", (digital_id,))
    else:
        cursor.execute("INSERT INTO users (digital_id, ip, country, city, user_agent, visit_count) VALUES (?, ?, ?, ?, ?, 1)", 
                       (digital_id, ip, country, city, user_agent))

    conn.commit()
    conn.close()

    return jsonify({"message": "User tracked successfully", "digital_id": digital_id})

if __name__ == '__main__':
    app.run(debug=True)

ğŸ“Œ Bu API ile her kullanÄ±cÄ± giriÅŸ yaptÄ±ÄŸÄ±nda:
	â€¢	IP & cihaz bilgileri anonimleÅŸtirilerek dijital ID oluÅŸturulur.
	â€¢	SQLite veritabanÄ±na kaydedilir.
	â€¢	EÄŸer kullanÄ±cÄ± tekrar girerse, ziyaret sayÄ±sÄ± artÄ±rÄ±lÄ±r.

ğŸ“Œ 4. KullanÄ±cÄ± Hangi Sekmede Ne Kadar KaldÄ±?

KullanÄ±cÄ±nÄ±n hangi sekmede ne kadar sÃ¼re kaldÄ±ÄŸÄ±nÄ± Ã¶lÃ§mek iÃ§in JavaScript Event Listeners kullanabiliriz.

ğŸ“Œ JavaScript Kodu (Sayfada Kalma SÃ¼resini Ã–lÃ§me)

let startTime = Date.now();

window.addEventListener('beforeunload', () => {
    let endTime = Date.now();
    let timeSpent = (endTime - startTime) / 1000; // Saniye cinsinden

    fetch('/track-time', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ timeSpent })
    });
});

ğŸ“Œ Bu kod, kullanÄ±cÄ±nÄ±n sayfada ne kadar sÃ¼re kaldÄ±ÄŸÄ±nÄ± Ã¶lÃ§Ã¼p backendâ€™e gÃ¶nderecek.

ğŸŸ¢ C. Backend (Flask) ile KullanÄ±cÄ± SÃ¼relerini KayÄ±t AltÄ±na Alma

@app.route('/track-time', methods=['POST'])
def track_time():
    data = request.json
    time_spent = data.get('timeSpent')

    # VeritabanÄ±na sÃ¼re kaydet
    conn = sqlite3.connect('analytics.db')
    cursor = conn.cursor()
    cursor.execute("ALTER TABLE users ADD COLUMN time_spent REAL")  # EÄŸer yoksa ekle
    cursor.execute("UPDATE users SET time_spent = time_spent + ? WHERE digital_id = ?", (time_spent, digital_id))
    conn.commit()
    conn.close()

    return jsonify({"message": "Time tracked successfully"})

ğŸ“Œ BÃ¶ylece her kullanÄ±cÄ±nÄ±n belirli bir sekmede ne kadar sÃ¼re geÃ§irdiÄŸini Ã¶lÃ§ebiliriz.

ğŸ“Œ 5. Admin Panelinde Analitikleri GÃ¶sterme

Åimdi bu verileri yalnÄ±zca admin panelinde gÃ¶rmek iÃ§in bir sayfa oluÅŸturalÄ±m.

ğŸ“Œ Flask Admin Panel (Verileri Ã‡ekme ve GÃ¶rselleÅŸtirme)

@app.route('/admin')
def admin_dashboard():
    conn = sqlite3.connect('analytics.db')
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM users")
    users = cursor.fetchall()
    conn.close()

    return jsonify(users)

ğŸ“Œ Bu sayfa sadece admin tarafÄ±ndan eriÅŸilebilir olmalÄ± (Ã¶rn: ÅŸifre korumalÄ± bir admin paneli yapÄ±labilir).

ğŸ“Œ SonuÃ§: Ne Elde Ettik?

âœ… KullanÄ±cÄ±larÄ± anonim bir dijital kimlikle takip ettik.
âœ… KullanÄ±cÄ±nÄ±n Ã¼lkesini, ÅŸehrini ve cihazÄ±nÄ± analiz ettik.
âœ… Hangi sekmede ne kadar kaldÄ±ÄŸÄ±nÄ± Ã¶lÃ§tÃ¼k.
âœ… TÃ¼m verileri sadece admin panelinde gÃ¶sterdik.

ğŸš€ Bir sonraki adÄ±m: Bu verileri grafiklerle gÃ¶rselleÅŸtirmek ister misin? ğŸ“Š